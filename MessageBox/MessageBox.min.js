"use strict";class MessageBox{static show=function(message,title,buttonAction,defaultButtonIndex){message=message||"",defaultButtonIndex=defaultButtonIndex||0,("function"==typeof(title=title||"MessageBox")||title.isArray)&&(buttonAction&&buttonAction.isNumber&&(defaultButtonIndex=buttonAction),buttonAction=title,title="MessageBox");let msgBoxButtons=[],onCloseButtonClicked;buttonAction&&("function"==typeof buttonAction?msgBoxButtons=[{btnCaption:"OK",btnAction:buttonAction,isActive:!0,cssClass:"MsgBoxButton-OK"}]:buttonAction.isArray&&buttonAction.forEach((function(x,i){let msgBoxButton={};msgBoxButton.btnCaption=x.btnCaption||x.btnText||x.caption||x.text||("string"==typeof x?x:1===buttonAction.length?"OK":"Button-"+(i+1)),msgBoxButton.btnAction=x.buttonAction||x.btnAction||x.action||x.fn||null,msgBoxButton.isActive=x.isActive||x.isDefault||x.active||x.default||!1,msgBoxButton.cssClass=x.cssClass||x.class||x.className||"MsgBoxButton-"+msgBoxButton.btnCaption,msgBoxButtons.push(msgBoxButton)}))),0===msgBoxButtons.length&&(msgBoxButtons=[{btnCaption:"OK",btnAction:null,isActive:!0,cssClass:"MsgBoxButton-OK"}]);let msgBoxControls={then:function(fn){return msgBoxButtons[0].btnAction=fn,this},onClose:function(fn){return onCloseButtonClicked=fn,this}};return msgBoxButtons.forEach((function(btn,i){msgBoxControls["onButton"+(i+1)]=function(fn){return btn.btnAction=fn,this}})),message&&(message.isDomElement&&(message=message.toString()),message=message.stringify(),window.setTimeout((function(){let createMessageBox,msgBox=function(message,title){let html=`\n        <div class='MessageBoxBox'>\n            <div class='MessageBoxTitle'>\n                <div class='MessageBoxTitleLabel'>${title}</div>\n                <button class='MessageBoxCloseButton'>âœ–</button>\n            </div>\n            <div class='MessageBoxBody'>\n                 <div class='MessageBoxIcons'>\n                 </div>\n                 <div class='MessageBoxMessage'>\n                    <div>\n                      ${message}\n                    </div>\n                 </div>\n            </div>\n            <div class='MessageBoxButtons'>\n            </div>\n        </div>`,msgBox=document.createElement("div");return msgBox.className="MessageBox",msgBox.innerHTML=html,document.body.appendChild(msgBox),msgBox}(message,title);msgBox.classList.add("Open"),msgBox.classList.remove("Close"),msgBox.querySelector(".MessageBoxTitleLabel").on("mousedown",(function(e){e.stopPropagation(),e.preventDefault();let msgBoxBox=msgBox.querySelector(".MessageBoxBox"),pos={x:e.pageX,y:e.pageY};document.body.on("mousemove.MessageBox",(function(e){let left=msgBoxBox.offsetLeft+e.pageX-pos.x,top=msgBoxBox.offsetTop+e.pageY-pos.y;msgBoxBox.style.left=left+"px",msgBoxBox.style.top=top+"px",pos={x:e.pageX,y:e.pageY}})),document.body.one("mouseup",(function(e){document.body.off("mousemove.MessageBox")}))})),msgBox.querySelector(".MessageBoxCloseButton").onclick=function(){msgBox.classList.remove("Open"),msgBox.classList.add("Close"),window.setTimeout((function(){msgBox.remove(),"function"==typeof onCloseButtonClicked&&onCloseButtonClicked()}),100)};let MessageBoxButtons=msgBox.querySelector(".MessageBoxButtons");msgBoxButtons.forEach((function(x,i){let btn=document.createElement("input");btn.type="button",btn.className=x.cssClass,btn.value=x.btnCaption,(x.isActive||i===defaultButtonIndex)&&btn.setAttribute("IsActive",x.isActive),btn.onclick=function(){msgBox.classList.remove("Open"),msgBox.classList.add("Close"),window.setTimeout((function(){msgBox.remove(),"function"==typeof x.btnAction&&x.btnAction()}),100)},MessageBoxButtons.appendChild(btn)}));let btnActive=MessageBoxButtons.querySelector("[IsActive]");btnActive?btnActive.focus():(btnActive=MessageBoxButtons.querySelector("input:nth-child("+(defaultButtonIndex+1)+")"),btnActive&&btnActive.focus()),msgBox.on("click.MessageBox",(function(e){btnActive&&btnActive.focus()})).on("keydown.MessageBox",(function(e){27===e.which&&(e.stopPropagation(),e.preventDefault(),msgBox.querySelector(".MessageBoxCloseButton").click())}))}))),msgBoxControls}}